<!DOCTYPE html>
<html>
<head>
  <title>RedditVillage - Welcome</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <script src="./common.js"></script>
</head>
<body>
    <div class="page">
        <h1><span class="villageName"></span></h1>
        <h2>Join <span class="villageName"></span></h2>

        <p>As a citizen of <span class="villageName"></span> you can...
            <ul>
                <li>Vote in referendums</li>
                <li>Start your own referendums</li>
                <li>Receive basic income</li>
            </ul>
        </p>

        <p>To claim your account and become a citizen of <span class="villageName"></span> all you need is a Reddit account with at least <span id="minCommentKarma"></span> comment karma and <span id="minPostKarma"></span> post karma</p>

        <p>To get your account, login to <a href="https://reddit.com" target="_blank">Reddit</a> and send a private message to user <strong>RVGatekeeper</strong> with the following details:</p>

        <table>
            <tr>
                <td><strong>subject</strong></td><td>join</td>
            </tr>
            <tr>
                <td><strong>message</strong></td><td>&lt;your ethereum address&gt;</td>
            </tr>
        </table>

        <p>The RVGatekeeper robot will create your account and reply to your private message with instructions on how to proceed</p>

        <div id="overlayMessage" class="overlayMessage">
            <div id=overlayMessageContent></div>
            <button id="overlayMessageDismissButton">Dismiss</button>
        </div>
        <div id="overlayBackground" class="overlayBackground"></div>
        <div class="footer">Checkout my <a href="https://github.com/felixwatts/VillageCoin">sourcecode on github</a></div>
    </div>
</body>
</html>
</html>
<script>
  
  async function populateRequirements()
  {
      var minCommentKarma = await app.contract.getNumberParameter.call(web3.sha3("PRM_CITIZEN_REQUIREMENT_MIN_COMMENT_KARMA"), {from: app.account});
      var minPostKarma = await app.contract.getNumberParameter.call(web3.sha3("PRM_CITIZEN_REQUIREMENT_MIN_POST_KARMA"), {from: app.account});

      document.getElementById("minCommentKarma").innerHTML = minCommentKarma;
      document.getElementById("minPostKarma").innerHTML = minPostKarma;
  }

    window.addEventListener('load', async function()
    { 
        await init();   
        await populateRequirements();   
    });
</script>

<!DOCTYPE html>
<html>
<head>
  <title>VillageCoin - Propose Appointment of a New Gatekeeper</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <script src="./common.js"></script>
</head>
<body>
    <h1>VillageCoin</h1>
    <h2>Propose Appointment of a New Gatekeeper</h2>
    <ul class="menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="proposals.html">Vote</a></li>
        <li><a href="createProposal.html">Make a Proposal</a></li>
    </ul>
    <br>
        <br><label for="managerAddress">New Gatekeeper's Address:</label><input type="text" id="managerAddress" placeholder="e.g., 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae"></input>    
        <br><br><button id="send" onclick="submit()">Create Proposal</button>
        <br><br>    
    <br>
    <div id="status"></div>
</body>
</html>
<script>

async function submit() 
{
    try 
    {
        app.setStatus("Initiating transaction... (please wait)");

        var managerAddress = document.getElementById("managerAddress").value;
        if(managerAddress == undefined) throw("You must enter the address of the proposed gatekeeper");
        
        var villageCoin = await app.contract.deployed();
        await villageCoin.proposeCreateManager(managerAddress, {from: app.account});

        app.setStatus("Transaction complete!");  
    } 
    catch(error) 
    {
        app.setStatus(error);
    }
}

window.addEventListener('load', function()
{
    app.redirectNonUser();
});

</script>